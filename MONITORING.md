# План мониторинга бэкенда на AWS

## 1. Мониторинг состояния сервисов
- Создание дашборда в CloudWatch для отслеживания:
  - Статуса EC2 инстанса (CPU, память, диск)
  - Статуса PostgreSQL (доступность, использование ресурсов)
  - Статуса Nginx (доступность, количество запросов)
  - Статуса Python-сервисов (waterlevel-scheduler, waterlevel-api)

## 2. Мониторинг базы данных
- Создание метрик для PostgreSQL:
  - Количество записей в таблицах
  - Время последнего обновления данных
  - Размер базы данных
  - Количество активных подключений

## 3. Мониторинг API
- Настройка Health Check эндпоинта
- Мониторинг доступности API
- Отслеживание времени ответа
- Мониторинг количества запросов

## 4. Мониторинг шедулера
- Логирование результатов каждого запуска
- Отслеживание количества обновленных записей
- Мониторинг времени выполнения
- Оповещения о пропущенных запусках

## 5. Система оповещений
- Настройка CloudWatch Alarms для:
  - Недоступности сервисов
  - Высокой нагрузки
  - Ошибок в логах
  - Пропущенных обновлений данных

## 6. Логирование
- Централизованный сбор логов в CloudWatch Logs
- Структурированные логи для каждого сервиса
- Настройка retention policy для логов

## 7. Дашборды
- Создание CloudWatch Dashboard с основными метриками
- Отдельные виджеты для каждого компонента
- Графики и таблицы с ключевыми показателями

## 8. Автоматизация
- Скрипты для автоматического восстановления сервисов
- Автоматическое масштабирование при необходимости
- Автоматическое резервное копирование 